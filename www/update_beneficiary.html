<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, viewport-fit=cover">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="format-detection" content="telephone=no">
    <meta name="facebook-domain-verification" content="yffgkm3rbj1wpy0b1ghgrscxbmp4p3" />
    <title>Update Beneficiary</title>
    <link rel="icon" href="./assets/images/favicon.ico">
    <script type="text/javascript" src="cordova.js"></script>
    <link rel="stylesheet" type="text/css" href="./styles/main.min.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/jquery.modal.min.css">

    <style>
        .button:disabled {
          opacity: 1;
        }
  
        .hide {
            display: none;
        }
    </style>
        <!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window,document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
     fbq('init', '407432117177223'); 
    fbq('track', 'PageView');
    </script>
    <noscript>
     <img height="1" width="1" 
    src="https://www.facebook.com/tr?id=407432117177223&ev=PageView
    &noscript=1"/>
    </noscript>
    <!-- End Facebook Pixel Code -->
</head>

<body>
<header class="header db-nav">
    <div class="container container-custom">
      <div class="header-inner">
        <h2 class="header-title title">Update Beneficiary</h2>
        <a href="dashboard.html" class="btn-close close-beneficiary">
          <svg version="1.1" id="Capa_1" class="close-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          viewBox="0 0 47.971 47.971" xml:space="preserve">
            <g>
              <path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88
              c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242
              C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879
              s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"/>
            </g>
          </svg>
        </a>
      </div>
    </div>
  </header>
<!-------------splash----------------------------------->
    <main class="splash-screen" id="wait" style="display:none">
    <div class="container">
      <div class="content-holder">
        <div class="loader-holder">
          <div class="loader">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          </div>
        </div>
      </div>
    </div>
  </main>
    <div id="alertMe" class="overlay" style="display: none;">
        <div class="popup">
            <h3>Alert</h3>
            <a class="close" href="#" onclick="redirectMe();">&times;</a>
            <div class="content">
                <span id="alertMsg"></span>
                    <p>
                        <input id="btnDone" type="button" value="Ok" class="btn btn-blue btn-new" onclick="redirectMe();" /></p>
            </div>
        </div>
    </div>
  <main class="update-beneficiary" id="MainBlock">
    <div class="section-beneficiary-details">
      <div class="container">
        <div class="title-holder">
          <p class="title">Beneficiary Details</p>
        </div>
          <!-- <div style="color:#4800ff;font-size:medium;display:none" id="alertBox">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
                <span id="msg">This is an alert box.</span>
              </div> -->
        <div class="form-holder">
            <form id="form-update-beneficiary" class="form-wrapper" name="form-update-beneficiary">
                <div class="form-group">
                    <label for="firstName" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">First Name</p>
                            <input class="input-textbox textbox" id="txtBDFName" type="text" onclick="clearInputError('err1');" value="" required>
                            <span style="color:#f00;font-size:small" id="err1"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="firstName" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">Middle Name (Optional)</p>
                            <input class="input-textbox textbox" id="txtBDMName" onclick="clearInputError('err12');" type="text" value="">
                            <span style="color:#f00;font-size:small" id="err12"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="firstName" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">Last Name</p>
                            <input class="input-textbox textbox" id="txtBDLName" onclick="clearInputError('err2');" type="text" value="" required>
                            <span style="color:#f00;font-size:small" id="err2"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="mobileNumber" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">Mobile Number (Optional)</p>
                            <input class="input-textbox textbox" id="txtBDMobile" onkeyup="this.value = this.value.replace(/[^0-9]+/g,'')" onclick="clearInputError('err9');" type="tel" name="phone" value="">
                            <span style="color:#f00;font-size:small" id="err9"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="relationship" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">Relationship</p>
                            <select name="ddlRelationship" id="ddlRelationship_update" class="input-select select">
                            </select>

                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="addressOne" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">Address Line 1</p>
                            <input class="input-textbox textbox" id="txtBDAddr1" type="text" onclick="clearInputError('err3');" value="" required>
                            <span style="color:#f00;font-size:small" id="err3"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="addressTwo" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">Address Line 2 (Optional)</p>
                            <input class="input-textbox textbox" id="txtBDAddr2" onclick="clearInputError('err10');" type="text" value="">
                            <span style="color:#f00;font-size:small" id="err10"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="city" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">City / Town</p>
                            <input class="input-textbox textbox" id="txtBDAddr3" onclick="clearInputError('err4');" type="text" value="" required>
                            <span style="color:#f00;font-size:small" id="err4"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="zipCode" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title" id="UpdateBeneCode">Zip Code (Optional)</p>
                            <input class="input-textbox textbox" id="txtBDPostCode" onclick="clearInputError('err11');" type="text" value="">
                            <span style="color:#f00;font-size:small" id="err11"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="country" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">Country</p>
                            <select class="input-select select" id="txtBDCountry" required onchange="getDeliveryOptionBasedOnCountry()">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="country" class="form-label"></label>
                    <div class="form-controls">
                        <div class="input-holder">
                            <p class="input-title">Delivery Option</p>
                            <select class="input-select select" id="txtBDProduct" onChange="loadAcctInfo();" required></select>
                            <span style="color:#f00;font-size:small" id="errDeliveryOptionUpdate"></span>
                        </div>
                    </div>
                </div>
                <div id="eWalletInfo" style="display:none;">
                    <div class="form-group">
                        <label for="bank" class="form-label"></label>
                        <div class="form-controls">
                            <div class="input-holder">
                                <p class="input-title">Choose E-Wallet</p>
                                <select class="input-select select" id="txtEWBank" required></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="accountNo" class="form-label"></label>
                        <div class="form-controls">
                            <div class="input-holder">
                                <p class="input-title">Account Number</p>
                                <input class="input-textbox textbox" id="txtEWAcctNo" onclick="clearInputError('err8');" type="number" onkeyup="this.value = this.value.replace(/[^0-9]/g,'')" value="" required>
                                <span style="color:#f00;font-size:small" id="err8"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="bankInfo" style="display:none;">
                    <div class="form-group">
                        <label for="bank" class="form-label"></label>
                        <div class="form-controls">
                            <div class="input-holder">
                                <p class="input-title">Choose Bank</p>
                                <select class="input-select select" id="txtBDBank" required></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="bankBranch" class="form-label"></label>
                        <div class="form-controls">
                            <div class="input-holder">
                                <p class="input-title">Bank Branch (Optional)</p>
                                <input class="input-textbox textbox" id="txtBDBranch" onclick="clearInputError('err7');" type="text" value="">
                                <span style="color:#f00;font-size:small" id="err7"></span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="accountNo" class="form-label"></label>
                        <div class="form-controls">
                            <div class="input-holder">
                                <p class="input-title">Account Number</p>
                                <input class="input-textbox textbox" onkeyup="this.value = this.value.replace(/[^0-9]/g,'')" id="txtBDAcctNo" onclick="clearInputError('err6');" type="number" value="" required>
                                <span style="color:#f00;font-size:small" id="err6"></span>
                            </div>
                        </div>
                    </div>
                </div>
  
                <div id="bankInfoUKandES">
                    <div class="form-group SortCodetxtSortCode">
                        <label for="bankBranch" class="form-label"></label>
                        <div class="form-controls">
                            <div class="input-holder">
                                <p class="input-title">Sort Code</p>
                                <input class="input-textbox textbox" onkeyup="this.value = this.value.replace(/[^0-9]/g,'')" id="UpdateBeneSortCode" onclick="clearInputError('errisortCode');" type="number" value="">
                                <span style="color:#f00;font-size:small" id="errisortCode"></span>
                            </div>
                        </div>
                    </div>
  
                    <div class="form-group IBANtxtIBAN">
                      <label for="bankBranch" class="form-label"></label>
                      <div class="form-controls">
                          <div class="input-holder">
                              <p class="input-title">IBAN</p>
                              <input class="input-textbox textbox" id="UpdateBeneIBAN" onclick="clearInputError('erriban');" type="text" value="">
                              <span style="color:#f00;font-size:small" id="erriban"></span>
                          </div>
                      </div>
                    </div>
  
                    <div class="form-group uk_es_accountnumber">
                        <label for="accountNo" class="form-label"></label>
                        <div class="form-controls">
                            <div class="input-holder">
                                <p class="input-title">Account Number</p>
                                <input class="input-textbox textbox" onkeyup="this.value = this.value.replace(/[^0-9]/g,'')" id="txtAcctNo" type="number" value="" onclick="clearInputError('errUKSEan');" required>
                                <span style="color:#f00;font-size:small" id="errUKSEan"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bottom btn-holder">
                    <a href="#ex1" rel="modal:open" class="btn btn-blue save btn-new" id="nextBene" onclick="errorMsg()">Update</a>
                    <a href="#" class="btn btn-border-grey confirmation js-close btn-new-radius-red" onclick="backToSummary();">Cancel</a>              
                </div>
            </form>
        </div>
      </div>
    </div>
  </main>

    <div id="ex1" class="modal" style="display: none;width: 100%;margin-top: 25%;">
        <p style="text-align: center;">
            <span class="header-title title benetitle" style="text-align:center;color:#05294b">Confirm Account Number</span><br />
            <span style="text-align: center;font-size:medium;color:#758898;">Please make sure that the account details of your beneficiary is correct.</span><br><hr style="width: 100%;">
            <div>
                <div  id="_m_sortcode_container" style="display: flex;align-items: start;justify-content: space-between;flex-direction: column;margin-top: 10px;">
                  <label style="font-size: smaller;font-weight: 600;">Sort code</label>
                  <label style="float: right;font-size: smaller;word-break: break-all;" id="_m_sortcode"></label>
                </div>
                <div  id="_m_iban_container" style="display: flex;align-items: start;justify-content: space-between;flex-direction: column;margin-top: 10px;">
                  <label style="font-size: smaller;font-weight: 600;">IBAN</label>
                  <label style="float: right;font-size: smaller;word-break: break-all;" id="_m_iban"></label>
                </div>
                <div  id="_m_acc_number_container" style="display: flex;align-items: start;justify-content: space-between;flex-direction: column;margin-top: 10px;">
                  <label style="font-size: smaller;font-weight: 600;">Account number</label>
                  <label style="float: right;font-size: smaller;word-break: break-all;" id="_m_acc_number"></label>
                </div>
            </div>
        </p>
        <div style="display:flex;justify-content:space-between;">
            <div style="display: flex;align-items: center;justify-content: center;height: 15vh;flex-direction: column;width: 100%;"">
                <button class="btn btn-blue btn-new" id="disableCJ" onclick="checkFromClearJunctionUpdate()" style="color: white;width: 100%;display: flex;justify-content: center;align-items: center;">
                    <span class="btn-txt">Save</span></button>
                    <a href="#" class="btn btn-border-blue btn-new-radius" rel="modal:close" style="color: #888;border: 1px solid #888;width: 100%;" onclick="errorMsg()">Edit</a>    
            </div>
        </div>
    </div>

  <footer class="footerConnection no-internet-connection" style="display: none;">
    <div style="display: flex;justify-content: center; align-items: center;height: 5vh;">
        <img src="" alt="" height="20px" width="20px" class="footerConnectionImage">
        <span class="foooterConnectionMsg" style="margin-left: 3%;"></span>
    </div>
</footer>
  
    <input id="txtGoTo" type="hidden" />
    <input id="relationship_update" type="hidden"  value="relupdate"/>
    <script src="./scripts/vendors/jquery-3.0.0.min.js"></script>
    <script src="./scripts/vendors/jquery.modal.min.js"></script>
    <script type="text/javascript" src="js/defaultJSONData.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script src="./scripts/vendors/jquery.min.js"></script>
    <script type="text/javascript">
        storage.setItem("NOW", "update_beneficiary");
        storage.setItem("ViewBene","viewBene");

        getRelationShip();
   
        function getBankList() {
            var strData = "reqType=BIC&random=" + new Date().valueOf();
            var myURL = bcremit + "parameters.aspx";
            ajaxCall(myURL, strData, 'listOfBank');
        }

        function errorMsg(){   
            var sortCode = $("#UpdateBeneSortCode").val();
            var accountNumber = $("#txtAcctNo").val();
            var country = $("#txtBDCountry").val();
            var iban = $("#UpdateBeneIBAN").val();
            
            if(country == "PH"){
                $("#nextBene").removeAttr("rel");
                updateBene('01');
            } else if(country == "UK"){
                $("#_m_iban_container").hide();
                $("#_m_sortcode").html(sortCode);
                $("#_m_acc_number").html(accountNumber);
                if(sortCode == "" || sortCode == null  || sortCode == undefined){
                    $("#nextBene").removeAttr("rel");
                    $("#errisortCode").html("Please enter beneficiary's sort code.")
                } if(accountNumber == "" || accountNumber == null  || accountNumber == undefined){
                    $("#nextBene").removeAttr("rel");
                    $("#errUKSEan").html("Please enter beneficiary's account number.")
                } else if(accountNumber != "" && sortCode != "" ){
                    $("#nextBene").attr("rel", "modal:open");
                }
            
                $(".benetitle").html("Confirm Account Number");
                $(".benetitle").css("color", "#05294b");

            }else{
         
                $("#_m_sortcode_container").hide();
                $("#_m_acc_number_container").hide();
                $("#_m_iban").html(iban);
                if(iban == "" || iban == null  || iban == undefined){
                    $("#nextBene").removeAttr("rel");
                    $("#erriban").html("Please enter beneficiary's IBAN.")
                } else if(iban != "" ){
                    $("#nextBene").attr("rel", "modal:open");
                }

                $(".benetitle").html("Confirm Account Number");
                $(".benetitle").css("color", "#05294b");
            }
        }

        function responseBank(res) {
            JSONBank = res;

            var bdBank = document.getElementById("txtBDBank");

            var option;
            var selectedIndex = 0;

            var bdList = bdBank.options.length;

            for (var i = 0 ; i <= res.bank_list.length - 1; i++) {
                bank = res.bank_list[i];
                bdBank.options[bdBank.options.length] = new Option(bank.bank_name, bank.bic);
            }

            bdBank = document.getElementById("txtEWBank");
            for (var i = 0 ; i <= res.ew_list.length - 1; i++) {
                bank = res.ew_list[i];
                bdBank.options[bdBank.options.length] = new Option(bank.bank_name, bank.bic);
            }
        }

        function responseEWallet(res) {
            JSONBank = res;
            var bdBank = document.getElementById("txtEWBank");
            var option;
            var selectedIndex = 0;
            var bdList = bdBank.options.length;
            for (var i = 0 ; i <= res.bank_list.length - 1; i++) {
                bank = res.bank_list[i];
                bdBank.options[bdBank.options.length] = new Option(bank.bank_name, bank.bic);
            }
        }

        function loadAcctInfo() {
            var prod = $("#txtBDProduct").val();
            var country = $("#txtBDCountry").val();
            if (prod == "1" && country == "UK") {
                $("#bankInfoUKandES").show();
                $(".SortCodetxtSortCode").show();
                $(".uk_es_accountnumber").show();
                $("#bankInfo").hide();
                $("#eWalletInfo").hide();
                $(".IBANtxtIBAN").hide();
            } else if (prod == "0") {
                $("#bankInfo").hide();
                $("#eWalletInfo").hide();
                $("#bankInfoUKandES").hide();
            } else if (prod == "4") {
                $("#eWalletInfo").show();
                $("#bankInfo").hide();
                $("#bankInfoUKandES").hide();
            } else if (prod == "-1") {
                $("#eWalletInfo").hide();
                $("#bankInfo").hide();
                $("#bankInfoUKandES").hide();
            }  else if(prod == 1 && country == "PH") {
                $("#bankInfo").show();
                $("#eWalletInfo").hide();
                $("#bankInfoUKandES").hide();
            } else {
                $("#bankInfoUKandES").show();
                $(".IBANtxtIBAN").show();
                $(".uk_es_accountnumber").hide();
                $("#bankInfo").hide();
                $("#eWalletInfo").hide();
                $(".SortCodetxtSortCode").hide();
            }
        }
      
    </script>
</body>
</html>